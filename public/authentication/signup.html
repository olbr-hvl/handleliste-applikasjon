<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrer ny bruker</title>
</head>
<body>
    <!-- TODO: registrering av bruker -->
    <form id="signup-form" action="/src/api/authentication/signup.php" method="post">
        <label>
            E-post
            <input type="email" required name="email">
        </label>
        <label>
            Passord
            <input type="password" required name="password" autocomplete="new-password">
        </label>
        <button type="submit">Registrer ny bruker</button>
    </form>
    <script>
        const signupForm = document.getElementById('signup-form')

        signupForm.addEventListener('submit', event => {
            event.preventDefault()

            const form = event.target
            const url = form.action
            const method = form.method

            const formData = new FormData(form)
            const filteredFormData = Object.fromEntries([...formData].filter(([key, value]) => value !== ''))
            const body = JSON.stringify(filteredFormData)

            const headers = {
                'Content-Type': 'application/json'
            }

            fetch(url, {
                method,
                body,
                headers,
            })
        })
    </script>
</body>
</html>